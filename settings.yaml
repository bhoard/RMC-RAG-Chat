# Simple RAG Pipeline Configuration
# All scripts will read settings from this file
# DO NOT commit sensitive data to this file if making repo public

# Website Configuration
site:
  # List of sitemap URLs to crawl
  # You can add multiple sitemaps from different domains
  sitemap_urls:
    - "https://www.rmc.edu/sitemap.xml"
    - "https://catalog.rmc.edu/sitemap.xml"
    - "https://rmcathletics.com/sitemap.xml"
    # Add more sitemaps as needed
  
  user_agent: "SimpleRAGBot/1.0 (+https://github.com/bhoard/RMC-RAG-Chat)"
  
# Database Configuration
database:
  crawl_ledger: "crawl_ledger.db"  # stores URLs and raw content
  chunks: "chunks.db"  # stores processed chunks for RAG
  embeddings: "embeddings.db"  # stores vector embeddings

# Crawl4AI Configuration
crawler:
  timeout: 30  # seconds
  max_retries: 3
  delay_between_requests: 1  # seconds to be polite between requests
  batch_size: 10  # number of pages to crawl per run (0 = all pending pages)
  recrawl_after_days: 30  # recrawl successfully crawled pages after this many days
  
  # URL patterns to ignore (supports wildcards)
  ignore_patterns:
    - "/wp-content/*"
    - "/events/*" # TEC junk
    - "/event/*" # Still TEC junk
    - "/profile/*" # Profile embeds
    - "/organization/*" # TEC stuff
    - "/organizer/*" # TEC junk
    - "/series/*" # More TEC junk
    - "/wp-admin/*" # WP admin
    - "/venue/*" # TEC junk 
    - "/admin/*"  # Ignore all admin pages
    - "/login"    # Ignore specific page
    - "*/print/*" # Ignore print versions
    # Add more patterns as needed
  
# Processing Configuration
processing:
  chunk_size: 500  # target characters per chunk
  chunk_overlap: 50  # character overlap between chunks
  min_chunk_size: 100  # minimum chunk size (skip smaller chunks)
  respect_sentences: true  # try to break at sentence boundaries
  respect_paragraphs: true  # try to keep paragraphs together when possible
  
# RAG Query Configuration
rag:
  # Get your API key from: https://console.anthropic.com/
  # You can set this here or use environment variable: ANTHROPIC_API_KEY
  claude_api_key: ""  # Leave empty to use ANTHROPIC_API_KEY env var
  
  model: "claude-sonnet-4-20250514"  # Claude Sonnet 4
  max_tokens: 2000  # Max response length
  temperature: 0.7  # 0.0 = focused, 1.0 = creative
  
  top_k_chunks: 5  # How many similar chunks to retrieve
  min_similarity: 0.3  # Minimum cosine similarity (0-1)
  
  system_prompt: |
    You are a helpful admissions counselor assistant for Randolph-Macon College (RMC).
    Answer questions using the provided context from RMC's official websites.
    
    Guidelines:
    - Be accurate and cite specific information when possible
    - If the answer isn't in the context, say so clearly
    - Do not make up answers that are not in the context
    - Be concise but thorough
    - Use a friendly, informative tone appropriate for prospective students and families
    - Do not promise anything
    - Act professionally at all times
    - If the user is rude or offensive, end the conversation

embeddings:
  model: "all-mpnet-base-v2"  # sentence-transformers model name
  dimension: 768  # embedding dimension for the model above
  batch_size: 100  # number of chunks to embed per run (0 = all pending)
  processing_batch: 32  # chunks to process together in model (for efficiency)
  
  # Alternative models you can use:
  # - "all-MiniLM-L6-v2" (384 dim) - Fast, good quality
  # - "all-mpnet-base-v2" (768 dim) - Better quality, slower
  # - "BAAI/bge-small-en-v1.5" (384 dim) - Good for retrieval
  # - "BAAI/bge-base-en-v1.5" (768 dim) - Better for retrieval
